(()=>{var t={493:function(t){t.exports=function(){"use strict";var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)},e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function r(t,e,r,n){var o,i,u,s=e||[0],h=(r=r||0)>>>3,a=-1===n?3:0;for(o=0;o<t.length;o+=1)i=(u=o+h)>>>2,s.length<=i&&s.push(0),s[i]|=t[o]<<8*(a+n*(u%4));return{value:s,binLen:8*t.length+r}}function n(t,n,o){switch(n){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw new Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(t){case"HEX":return function(t,e,r){return function(t,e,r,n){var o,i,u,s;if(0!=t.length%2)throw new Error("String of HEX type must be in byte increments");var h=e||[0],a=(r=r||0)>>>3,c=-1===n?3:0;for(o=0;o<t.length;o+=2){if(i=parseInt(t.substr(o,2),16),isNaN(i))throw new Error("String of HEX type contains invalid characters");for(u=(s=(o>>>1)+a)>>>2;h.length<=u;)h.push(0);h[u]|=i<<8*(c+n*(s%4))}return{value:h,binLen:4*t.length+r}}(t,e,r,o)};case"TEXT":return function(t,e,r){return function(t,e,r,n,o){var i,u,s,h,a,c,l,f,p=0,d=r||[0],g=(n=n||0)>>>3;if("UTF8"===e)for(l=-1===o?3:0,s=0;s<t.length;s+=1)for(u=[],128>(i=t.charCodeAt(s))?u.push(i):2048>i?(u.push(192|i>>>6),u.push(128|63&i)):55296>i||57344<=i?u.push(224|i>>>12,128|i>>>6&63,128|63&i):(s+=1,i=65536+((1023&i)<<10|1023&t.charCodeAt(s)),u.push(240|i>>>18,128|i>>>12&63,128|i>>>6&63,128|63&i)),h=0;h<u.length;h+=1){for(a=(c=p+g)>>>2;d.length<=a;)d.push(0);d[a]|=u[h]<<8*(l+o*(c%4)),p+=1}else for(l=-1===o?2:0,f="UTF16LE"===e&&1!==o||"UTF16LE"!==e&&1===o,s=0;s<t.length;s+=1){for(i=t.charCodeAt(s),!0===f&&(i=(h=255&i)<<8|i>>>8),a=(c=p+g)>>>2;d.length<=a;)d.push(0);d[a]|=i<<8*(l+o*(c%4)),p+=2}return{value:d,binLen:8*p+n}}(t,n,e,r,o)};case"B64":return function(t,r,n){return function(t,r,n,o){var i,u,s,h,a,c,l=0,f=r||[0],p=(n=n||0)>>>3,d=-1===o?3:0,g=t.indexOf("=");if(-1===t.search(/^[a-zA-Z0-9=+/]+$/))throw new Error("Invalid character in base-64 string");if(t=t.replace(/=/g,""),-1!==g&&g<t.length)throw new Error("Invalid '=' found in base-64 string");for(i=0;i<t.length;i+=4){for(h=t.substr(i,4),s=0,u=0;u<h.length;u+=1)s|=e.indexOf(h.charAt(u))<<18-6*u;for(u=0;u<h.length-1;u+=1){for(a=(c=l+p)>>>2;f.length<=a;)f.push(0);f[a]|=(s>>>16-8*u&255)<<8*(d+o*(c%4)),l+=1}}return{value:f,binLen:8*l+n}}(t,r,n,o)};case"BYTES":return function(t,e,r){return function(t,e,r,n){var o,i,u,s,h=e||[0],a=(r=r||0)>>>3,c=-1===n?3:0;for(i=0;i<t.length;i+=1)o=t.charCodeAt(i),u=(s=i+a)>>>2,h.length<=u&&h.push(0),h[u]|=o<<8*(c+n*(s%4));return{value:h,binLen:8*t.length+r}}(t,e,r,o)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch(t){throw new Error("ARRAYBUFFER not supported by this environment")}return function(t,e,n){return function(t,e,n,o){return r(new Uint8Array(t),e,n,o)}(t,e,n,o)};case"UINT8ARRAY":try{new Uint8Array(0)}catch(t){throw new Error("UINT8ARRAY not supported by this environment")}return function(t,e,n){return r(t,e,n,o)};default:throw new Error("format must be HEX, TEXT, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}function o(t,r,n,o){switch(t){case"HEX":return function(t){return function(t,e,r,n){var o,i,u="",s=e/8,h=-1===r?3:0;for(o=0;o<s;o+=1)i=t[o>>>2]>>>8*(h+r*(o%4)),u+="0123456789abcdef".charAt(i>>>4&15)+"0123456789abcdef".charAt(15&i);return n.outputUpper?u.toUpperCase():u}(t,r,n,o)};case"B64":return function(t){return function(t,r,n,o){var i,u,s,h,a,c="",l=r/8,f=-1===n?3:0;for(i=0;i<l;i+=3)for(h=i+1<l?t[i+1>>>2]:0,a=i+2<l?t[i+2>>>2]:0,s=(t[i>>>2]>>>8*(f+n*(i%4))&255)<<16|(h>>>8*(f+n*((i+1)%4))&255)<<8|a>>>8*(f+n*((i+2)%4))&255,u=0;u<4;u+=1)c+=8*i+6*u<=r?e.charAt(s>>>6*(3-u)&63):o.b64Pad;return c}(t,r,n,o)};case"BYTES":return function(t){return function(t,e,r){var n,o,i="",u=e/8,s=-1===r?3:0;for(n=0;n<u;n+=1)o=t[n>>>2]>>>8*(s+r*(n%4))&255,i+=String.fromCharCode(o);return i}(t,r,n)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch(t){throw new Error("ARRAYBUFFER not supported by this environment")}return function(t){return function(t,e,r){var n,o=e/8,i=new ArrayBuffer(o),u=new Uint8Array(i),s=-1===r?3:0;for(n=0;n<o;n+=1)u[n]=t[n>>>2]>>>8*(s+r*(n%4))&255;return i}(t,r,n)};case"UINT8ARRAY":try{new Uint8Array(0)}catch(t){throw new Error("UINT8ARRAY not supported by this environment")}return function(t){return function(t,e,r){var n,o=e/8,i=-1===r?3:0,u=new Uint8Array(o);for(n=0;n<o;n+=1)u[n]=t[n>>>2]>>>8*(i+r*(n%4))&255;return u}(t,r,n)};default:throw new Error("format must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}function i(t){var e={outputUpper:!1,b64Pad:"=",outputLen:-1},r=t||{},n="Output length must be a multiple of 8";if(e.outputUpper=r.outputUpper||!1,r.b64Pad&&(e.b64Pad=r.b64Pad),r.outputLen){if(r.outputLen%8!=0)throw new Error(n);e.outputLen=r.outputLen}else if(r.shakeLen){if(r.shakeLen%8!=0)throw new Error(n);e.outputLen=r.shakeLen}if("boolean"!=typeof e.outputUpper)throw new Error("Invalid outputUpper formatting option");if("string"!=typeof e.b64Pad)throw new Error("Invalid b64Pad formatting option");return e}function u(t,e){return t<<e|t>>>32-e}function s(t,e,r){return t^e^r}function h(t,e,r){return t&e^t&r^e&r}function a(t,e){var r=(65535&t)+(65535&e);return(65535&(t>>>16)+(e>>>16)+(r>>>16))<<16|65535&r}function c(t,e,r,n,o){var i=(65535&t)+(65535&e)+(65535&r)+(65535&n)+(65535&o);return(65535&(t>>>16)+(e>>>16)+(r>>>16)+(n>>>16)+(o>>>16)+(i>>>16))<<16|65535&i}function l(t){return[1732584193,4023233417,2562383102,271733878,3285377520]}function f(t,e){var r,n,o,i,l,f,p,d,g=[];for(r=e[0],n=e[1],o=e[2],i=e[3],l=e[4],p=0;p<80;p+=1)g[p]=p<16?t[p]:u(g[p-3]^g[p-8]^g[p-14]^g[p-16],1),f=p<20?c(u(r,5),(d=n)&o^~d&i,l,1518500249,g[p]):p<40?c(u(r,5),s(n,o,i),l,1859775393,g[p]):p<60?c(u(r,5),h(n,o,i),l,2400959708,g[p]):c(u(r,5),s(n,o,i),l,3395469782,g[p]),l=i,i=o,o=u(n,30),n=r,r=f;return e[0]=a(r,e[0]),e[1]=a(n,e[1]),e[2]=a(o,e[2]),e[3]=a(i,e[3]),e[4]=a(l,e[4]),e}function p(t,e,r,n){for(var o,i=15+(e+65>>>9<<4),u=e+r;t.length<=i;)t.push(0);for(t[e>>>5]|=128<<24-e%32,t[i]=4294967295&u,t[i-1]=u/4294967296|0,o=0;o<t.length;o+=16)n=f(t.slice(o,o+16),n);return n}return function(e){function r(t,r,o){var i=this;if("SHA-1"!==t)throw new Error("Chosen SHA variant is not supported");var u=o||{};return(i=e.call(this,t,r,o)||this).t=!0,i.i=i.o,i.u=-1,i.s=n(i.h,i.v,i.u),i.A=f,i.p=function(t){return t.slice()},i.l=l,i.R=p,i.U=[1732584193,4023233417,2562383102,271733878,3285377520],i.T=512,i.m=160,i.F=!1,u.hmacKey&&i.B(function(t,e,r,o){var i="hmacKey must include a value and format";if(!e)throw new Error(i);if(void 0===e.value||!e.format)throw new Error(i);return n(e.format,e.encoding||"UTF8",r)(e.value)}(0,u.hmacKey,i.u)),i}return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}(r,e),r}(function(){function t(t,e,r){var n=r||{};if(this.h=e,this.v=n.encoding||"UTF8",this.numRounds=n.numRounds||1,isNaN(this.numRounds)||this.numRounds!==parseInt(this.numRounds,10)||1>this.numRounds)throw new Error("numRounds must a integer >= 1");this.g=t,this.Y=[],this.I=0,this.C=!1,this.H=0,this.L=!1,this.N=[],this.S=[]}return t.prototype.update=function(t){var e,r=0,n=this.T>>>5,o=this.s(t,this.Y,this.I),i=o.binLen,u=o.value,s=i>>>5;for(e=0;e<s;e+=n)r+this.T<=i&&(this.U=this.A(u.slice(e,e+n),this.U),r+=this.T);this.H+=r,this.Y=u.slice(r>>>5),this.I=i%this.T,this.C=!0},t.prototype.getHash=function(t,e){var r,n,u=this.m,s=i(e);if(this.F){if(-1===s.outputLen)throw new Error("Output length must be specified in options");u=s.outputLen}var h=o(t,u,this.u,s);if(this.L&&this.i)return h(this.i(s));for(n=this.R(this.Y.slice(),this.I,this.H,this.p(this.U),u),r=1;r<this.numRounds;r+=1)this.F&&u%32!=0&&(n[n.length-1]&=16777215>>>24-u%32),n=this.R(n,u,0,this.l(this.g),u);return h(n)},t.prototype.setHMACKey=function(t,e,r){if(!this.t)throw new Error("Variant does not support HMAC");if(this.C)throw new Error("Cannot set MAC key after calling update");var o=n(e,(r||{}).encoding||"UTF8",this.u);this.B(o(t))},t.prototype.B=function(t){var e,r=this.T>>>3,n=r/4-1;if(1!==this.numRounds)throw new Error("Cannot set numRounds with MAC");if(this.L)throw new Error("MAC key already set");for(r<t.binLen/8&&(t.value=this.R(t.value,t.binLen,0,this.l(this.g),this.m));t.value.length<=n;)t.value.push(0);for(e=0;e<=n;e+=1)this.N[e]=909522486^t.value[e],this.S[e]=1549556828^t.value[e];this.U=this.A(this.N,this.U),this.H=this.T,this.L=!0},t.prototype.getHMAC=function(t,e){var r=i(e);return o(t,this.m,this.u,r)(this.o())},t.prototype.o=function(){var t;if(!this.L)throw new Error("Cannot call getHMAC without first setting MAC key");var e=this.R(this.Y.slice(),this.I,this.H,this.p(this.U),this.m);return t=this.A(this.S,this.l(this.g)),this.R(e,this.m,this.T,t,this.m)},t}())}()}},e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={exports:{}};return t[n].call(o.exports,o,o.exports,r),o.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";var t=r(493),e=r.n(t);(function(){var t,r;r=class{constructor(t=30,e=6){if(this.expiry=t,this.length=e,this.length>8||this.length<6)throw"Error: invalid code length"}dec2hex(t){return(t<15.5?"0":"")+Math.round(t).toString(16)}hex2dec(t){return parseInt(t,16)}base32tohex(t){var e,r,n,o,i;for(e="",n="",o=0;o<t.length;)i="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567".indexOf(t.charAt(o).toUpperCase()),e+=this.leftpad(i.toString(2),5,"0"),o++;for(o=0;o+4<=e.length;)r=e.substr(o,4),n+=parseInt(r,2).toString(16),o+=4;return n}leftpad(t,e,r){return e+1>=t.length&&(t=Array(e+1-t.length).join(r)+t),t}getOtp(t,r=(new Date).getTime()){var n,o,i,u,s,h,a;if(i=this.base32tohex(t),n=Math.round(r/1e3),a=this.leftpad(this.dec2hex(Math.floor(n/this.expiry)),16,"0"),(h=new(e())("SHA-1","HEX")).setHMACKey(i,"HEX"),h.update(a),"KEY MUST BE IN BYTE INCREMENTS"===(o=h.getHMAC("HEX")))throw"Error: hex key must be in byte increments";return u=this.hex2dec(o.substring(o.length-1)),(s=(this.hex2dec(o.substr(2*u,8))&this.hex2dec("7fffffff"))+"").length>this.length?s.substr(s.length-this.length,this.length):this.leftpad(s,this.length,"0")}},t=class{constructor(t=6){if(this.length=t,this.length>8||this.length<6)throw"Error: invalid code length"}uintToString(t){var e;return e=String.fromCharCode.apply(null,t),decodeURIComponent(escape(e))}getOtp(t,r){var n,o,i,u,s;return(u=new(e())("SHA-1","TEXT")).setHMACKey(t,"TEXT"),u.update(this.uintToString(new Uint8Array(this.intToBytes(r)))),n=u.getHMAC("HEX"),s=(127&(o=this.hexToBytes(n))[i=15&o[19]])<<24|(255&o[i+1])<<16|(255&o[i+2])<<8|255&o[i+3],(s+="").substr(s.length-this.length,this.length)}intToBytes(t){var e,r;for(e=[],r=7;r>=0;)e[r]=255&t,t>>=8,--r;return e}hexToBytes(t){var e,r,n;for(r=[],n=0,e=t.length;n<e;)r.push(parseInt(t.substr(n,2),16)),n+=2;return r}},window.jsOTP={},jsOTP.totp=r,jsOTP.hotp=t}).call(void 0),function(){var t=null,r=null,n=null,o=null,i=null,u=null,s=null,h=null,a=null,c=null,l=null;function f(t,e){var r;return(r=t.indexOf(e))>0?t.substr(0,r):t}function p(){return(a||{})[c]||null}function d(t){var e=new jsOTP.totp(30,6).getOtp(t);s.innerHTML!=e&&(s.innerHTML=e);var r=30-(new Date).getSeconds()%30,n=Math.floor((r||30)/30*100);h.style.width=n+"%"}function g(){if(a){var t=p();if(t){d(t);var e=1e3-(new Date).getMilliseconds();e<10&&(e+=1e3),setTimeout(g,e)}}}function v(){chrome.storage.local.get(["totpKeyStore"],(function(t){var e;a=t.totpKeyStore,(e=p())?function(t){try{d(t)}catch(t){console.error(t)}r.style.display="none",u.style.display="",g()}(e):(n.value="",u.style.display="none",r.style.display="")}))}r=document.getElementById("keyForm"),n=document.getElementById("totpKey"),o=document.getElementById("saveButton"),u=document.getElementById("totpArea"),s=document.getElementById("totpNumber"),i=document.getElementById("reset"),h=document.getElementById("timespan"),l=document.getElementById("error"),o.onclick=function(){if(/^[ABCDEFGHIJKLMNOPQRSTUVWXYZ234567]+$/i.test(n.value)&&(new jsOTP.totp).base32tohex(n.value).length%2==0){l.innerHTML="&nbsp;";var t=a||{};t[c]=n.value,chrome.storage.local.set({totpKeyStore:t},(function(){v()}))}else l.innerHTML="Invalid base32 key"},i.onclick=function(){var t=a||{};delete t[c],chrome.storage.local.set({totpKeyStore:t},(function(){v()}))},chrome.tabs.getSelected(null,(function(r){t=r,c=function(){var r=t.url.toLowerCase();r=f(r,"?"),r=f(r,"#");var n=new(e())("SHA-1","TEXT");return n.update(r),"url_"+n.getHash("HEX")}(),v()}))}()})()})();