(()=>{"use strict";var t,r,e={753:function(t,r,e){var n;!function(o){function a(t,r,e){var n,o,a,i,d,g,E,b,T,w=0,m=[],R=0,U=!1,B=[],H=[],F=!1;if(n=(e=e||{}).encoding||"UTF8",(T=e.numRounds||1)!==parseInt(T,10)||1>T)throw Error("numRounds must a integer >= 1");if("SHA-1"!==t)throw Error("Chosen SHA variant is not supported");d=512,g=y,E=v,i=160,b=function(t){return t.slice()},a=p(r,n),o=A(t),this.setHMACKey=function(r,e,a){if(!0===U)throw Error("HMAC key already set");if(!0===F)throw Error("Cannot set HMAC key after calling update");if(r=(e=p(e,n=(a||{}).encoding||"UTF8")(r)).binLen,e=e.value,a=64/4-1,64<r/8){for(e=E(e,r,0,A(t),i);e.length<=a;)e.push(0);e[a]&=4294967040}else if(64>r/8){for(;e.length<=a;)e.push(0);e[a]&=4294967040}for(r=0;r<=a;r+=1)B[r]=909522486^e[r],H[r]=1549556828^e[r];o=g(B,o),w=d,U=!0},this.update=function(t){var r,e,n,i=0;for(t=(r=a(t,m,R)).binLen,e=r.value,r=t>>>5,n=0;n<r;n+=16)i+d<=t&&(o=g(e.slice(n,n+16),o),i+=d);w+=i,m=e.slice(i>>>5),R=t%d,F=!0},this.getHash=function(r,e){var n,a,p,d;if(!0===U)throw Error("Cannot call getHash after setting HMAC key");switch(p=f(e),r){case"HEX":n=function(t){return u(t,i,p)};break;case"B64":n=function(t){return s(t,i,p)};break;case"BYTES":n=function(t){return h(t,i)};break;case"ARRAYBUFFER":try{a=new ArrayBuffer(0)}catch(t){throw Error("ARRAYBUFFER not supported by this environment")}n=function(t){return c(t,i)};break;case"UINT8ARRAY":try{a=new Uint8Array(0)}catch(t){throw Error("UINT8ARRAY not supported by this environment")}n=function(t){return l(t,i)};break;default:throw Error("format must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}for(d=E(m.slice(),R,w,b(o),i),a=1;a<T;a+=1)d=E(d,i,0,A(t),i);return n(d)},this.getHMAC=function(r,e){var n,a,p,y;if(!1===U)throw Error("Cannot call getHMAC without first setting HMAC key");switch(p=f(e),r){case"HEX":n=function(t){return u(t,i,p)};break;case"B64":n=function(t){return s(t,i,p)};break;case"BYTES":n=function(t){return h(t,i)};break;case"ARRAYBUFFER":try{n=new ArrayBuffer(0)}catch(t){throw Error("ARRAYBUFFER not supported by this environment")}n=function(t){return c(t,i)};break;case"UINT8ARRAY":try{n=new Uint8Array(0)}catch(t){throw Error("UINT8ARRAY not supported by this environment")}n=function(t){return l(t,i)};break;default:throw Error("outputFormat must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}return a=E(m.slice(),R,w,b(o),i),y=g(H,A(t)),n(y=E(a,i,d,y,i))}}function i(t,r,e){var n,o,a,i;for(r=r||[0],o=(e=e||0)>>>3,n=0;n<t.length;n+=1)a=(i=n+o)>>>2,r.length<=a&&r.push(0),r[a]|=t[n]<<8*(3+i%4*-1);return{value:r,binLen:8*t.length+e}}function u(t,r,e){var n,o,a="";for(r/=8,n=0;n<r;n+=1)o=t[n>>>2]>>>8*(3+n%4*-1),a+="0123456789abcdef".charAt(o>>>4&15)+"0123456789abcdef".charAt(15&o);return e.outputUpper?a.toUpperCase():a}function s(t,r,e){var n,o,a,i="",u=r/8;for(n=0;n<u;n+=3)for(o=n+1<u?t[n+1>>>2]:0,a=n+2<u?t[n+2>>>2]:0,a=(t[n>>>2]>>>8*(3+n%4*-1)&255)<<16|(o>>>8*(3+(n+1)%4*-1)&255)<<8|a>>>8*(3+(n+2)%4*-1)&255,o=0;4>o;o+=1)i+=8*n+6*o<=r?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(a>>>6*(3-o)&63):e.b64Pad;return i}function h(t,r){var e,n,o="",a=r/8;for(e=0;e<a;e+=1)n=t[e>>>2]>>>8*(3+e%4*-1)&255,o+=String.fromCharCode(n);return o}function c(t,r){var e,n,o=r/8,a=new ArrayBuffer(o);for(n=new Uint8Array(a),e=0;e<o;e+=1)n[e]=t[e>>>2]>>>8*(3+e%4*-1)&255;return a}function l(t,r){var e,n=r/8,o=new Uint8Array(n);for(e=0;e<n;e+=1)o[e]=t[e>>>2]>>>8*(3+e%4*-1)&255;return o}function f(t){var r={outputUpper:!1,b64Pad:"=",shakeLen:-1};if(t=t||{},r.outputUpper=t.outputUpper||!1,!0===t.hasOwnProperty("b64Pad")&&(r.b64Pad=t.b64Pad),"boolean"!=typeof r.outputUpper)throw Error("Invalid outputUpper formatting option");if("string"!=typeof r.b64Pad)throw Error("Invalid b64Pad formatting option");return r}function p(t,r){var e;switch(r){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(t){case"HEX":e=function(t,r,e){var n,o,a,i,u,s=t.length;if(0!=s%2)throw Error("String of HEX type must be in byte increments");for(r=r||[0],u=(e=e||0)>>>3,n=0;n<s;n+=2){if(o=parseInt(t.substr(n,2),16),isNaN(o))throw Error("String of HEX type contains invalid characters");for(a=(i=(n>>>1)+u)>>>2;r.length<=a;)r.push(0);r[a]|=o<<8*(3+i%4*-1)}return{value:r,binLen:4*s+e}};break;case"TEXT":e=function(t,e,n){var o,a,i,u,s,h,c,l,f=0;if(e=e||[0],s=(n=n||0)>>>3,"UTF8"===r)for(l=3,i=0;i<t.length;i+=1)for(a=[],128>(o=t.charCodeAt(i))?a.push(o):2048>o?(a.push(192|o>>>6),a.push(128|63&o)):55296>o||57344<=o?a.push(224|o>>>12,128|o>>>6&63,128|63&o):(i+=1,o=65536+((1023&o)<<10|1023&t.charCodeAt(i)),a.push(240|o>>>18,128|o>>>12&63,128|o>>>6&63,128|63&o)),u=0;u<a.length;u+=1){for(h=(c=f+s)>>>2;e.length<=h;)e.push(0);e[h]|=a[u]<<8*(l+c%4*-1),f+=1}else if("UTF16BE"===r||"UTF16LE"===r)for(l=2,a="UTF16LE"===r||"UTF16LE"!==r&&!1,i=0;i<t.length;i+=1){for(o=t.charCodeAt(i),!0===a&&(o=(u=255&o)<<8|o>>>8),h=(c=f+s)>>>2;e.length<=h;)e.push(0);e[h]|=o<<8*(l+c%4*-1),f+=2}return{value:e,binLen:8*f+n}};break;case"B64":e=function(t,r,e){var n,o,a,i,u,s,h,c=0;if(-1===t.search(/^[a-zA-Z0-9=+\/]+$/))throw Error("Invalid character in base-64 string");if(o=t.indexOf("="),t=t.replace(/\=/g,""),-1!==o&&o<t.length)throw Error("Invalid '=' found in base-64 string");for(r=r||[0],s=(e=e||0)>>>3,o=0;o<t.length;o+=4){for(u=t.substr(o,4),a=i=0;a<u.length;a+=1)i|=(n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(u.charAt(a)))<<18-6*a;for(a=0;a<u.length-1;a+=1){for(n=(h=c+s)>>>2;r.length<=n;)r.push(0);r[n]|=(i>>>16-8*a&255)<<8*(3+h%4*-1),c+=1}}return{value:r,binLen:8*c+e}};break;case"BYTES":e=function(t,r,e){var n,o,a,i,u;for(r=r||[0],a=(e=e||0)>>>3,o=0;o<t.length;o+=1)n=t.charCodeAt(o),i=(u=o+a)>>>2,r.length<=i&&r.push(0),r[i]|=n<<8*(3+u%4*-1);return{value:r,binLen:8*t.length+e}};break;case"ARRAYBUFFER":try{e=new ArrayBuffer(0)}catch(t){throw Error("ARRAYBUFFER not supported by this environment")}e=function(t,r,e){return i(new Uint8Array(t),r,e)};break;case"UINT8ARRAY":try{e=new Uint8Array(0)}catch(t){throw Error("UINT8ARRAY not supported by this environment")}e=function(t,r,e){return i(t,r,e)};break;default:throw Error("format must be HEX, TEXT, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}return e}function d(t,r){return t<<r|t>>>32-r}function g(t,r){var e=(65535&t)+(65535&r);return((t>>>16)+(r>>>16)+(e>>>16)&65535)<<16|65535&e}function E(t,r,e,n,o){var a=(65535&t)+(65535&r)+(65535&e)+(65535&n)+(65535&o);return((t>>>16)+(r>>>16)+(e>>>16)+(n>>>16)+(o>>>16)+(a>>>16)&65535)<<16|65535&a}function A(t){if("SHA-1"!==t)throw Error("No SHA variants supported");return[1732584193,4023233417,2562383102,271733878,3285377520]}function y(t,r){var e,n,o,a,i,u,s,h=[];for(e=r[0],n=r[1],o=r[2],a=r[3],i=r[4],s=0;80>s;s+=1)h[s]=16>s?t[s]:d(h[s-3]^h[s-8]^h[s-14]^h[s-16],1),u=20>s?E(d(e,5),n&o^~n&a,i,1518500249,h[s]):40>s?E(d(e,5),n^o^a,i,1859775393,h[s]):60>s?E(d(e,5),n&o^n&a^o&a,i,2400959708,h[s]):E(d(e,5),n^o^a,i,3395469782,h[s]),i=a,a=o,o=d(n,30),n=e,e=u;return r[0]=g(e,r[0]),r[1]=g(n,r[1]),r[2]=g(o,r[2]),r[3]=g(a,r[3]),r[4]=g(i,r[4]),r}function v(t,r,e,n){var o;for(o=15+(r+65>>>9<<4);t.length<=o;)t.push(0);for(t[r>>>5]|=128<<24-r%32,r+=e,t[o]=4294967295&r,t[o-1]=r/4294967296|0,r=t.length,o=0;o<r;o+=16)n=y(t.slice(o,o+16),n);return n}void 0===(n=function(){return a}.call(r,e,r,t))||(t.exports=n)}()}},n={};function o(t){if(n[t])return n[t].exports;var r=n[t]={exports:{}};return e[t].call(r.exports,r,r.exports,o),r.exports}o.n=t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return o.d(r,{a:r}),r},o.d=(t,r)=>{for(var e in r)o.o(r,e)&&!o.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:r[e]})},o.o=(t,r)=>Object.prototype.hasOwnProperty.call(t,r),t=o(753),r=o.n(t),function(){var t,e;e=class{constructor(t=30,r=6){if(this.expiry=t,this.length=r,this.length>8||this.length<6)throw"Error: invalid code length"}dec2hex(t){return(t<15.5?"0":"")+Math.round(t).toString(16)}hex2dec(t){return parseInt(t,16)}base32tohex(t){var r,e,n,o,a;for(r="",n="",o=0;o<t.length;)a="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567".indexOf(t.charAt(o).toUpperCase()),r+=this.leftpad(a.toString(2),5,"0"),o++;for(o=0;o+4<=r.length;)e=r.substr(o,4),n+=parseInt(e,2).toString(16),o+=4;return n}leftpad(t,r,e){return r+1>=t.length&&(t=Array(r+1-t.length).join(e)+t),t}getOtp(t,e=(new Date).getTime()){var n,o,a,i,u,s,h;if(a=this.base32tohex(t),n=Math.round(e/1e3),h=this.leftpad(this.dec2hex(Math.floor(n/this.expiry)),16,"0"),(s=new(r())("SHA-1","HEX")).setHMACKey(a,"HEX"),s.update(h),"KEY MUST BE IN BYTE INCREMENTS"===(o=s.getHMAC("HEX")))throw"Error: hex key must be in byte increments";return i=this.hex2dec(o.substring(o.length-1)),(u=(this.hex2dec(o.substr(2*i,8))&this.hex2dec("7fffffff"))+"").length>this.length?u.substr(u.length-this.length,this.length):this.leftpad(u,this.length,"0")}},t=class{constructor(t=6){if(this.length=t,this.length>8||this.length<6)throw"Error: invalid code length"}uintToString(t){var r;return r=String.fromCharCode.apply(null,t),decodeURIComponent(escape(r))}getOtp(t,e){var n,o,a,i,u;return(i=new(r())("SHA-1","TEXT")).setHMACKey(t,"TEXT"),i.update(this.uintToString(new Uint8Array(this.intToBytes(e)))),n=i.getHMAC("HEX"),u=(127&(o=this.hexToBytes(n))[a=15&o[19]])<<24|(255&o[a+1])<<16|(255&o[a+2])<<8|255&o[a+3],(u+="").substr(u.length-this.length,this.length)}intToBytes(t){var r,e;for(r=[],e=7;e>=0;)r[e]=255&t,t>>=8,--e;return r}hexToBytes(t){var r,e,n;for(e=[],n=0,r=t.length;n<r;)e.push(parseInt(t.substr(n,2),16)),n+=2;return e}},window.jsOTP={},jsOTP.totp=e,jsOTP.hotp=t}.call(void 0),function(){var t=null,e=null,n=null,o=null,a=null,i=null,u=null,s=null,h=null,c=null,l=null;function f(t,r){var e;return(e=t.indexOf(r))>0?t.substr(0,e):t}function p(){return(h||{})[c]||null}function d(t){var r=new jsOTP.totp(30,6).getOtp(t);u.innerHTML!=r&&(u.innerHTML=r);var e=30-(new Date).getSeconds()%30,n=Math.floor((e||30)/30*100);s.style.width=n+"%"}function g(){if(h){var t=p();if(t){d(t);var r=1e3-(new Date).getMilliseconds();r<10&&(r+=1e3),setTimeout(g,r)}}}function E(){chrome.storage.local.get(["totpKeyStore"],(function(t){var r;h=t.totpKeyStore,(r=p())?function(t){try{d(t)}catch(t){console.error(t)}e.style.display="none",i.style.display="",g()}(r):(n.value="",i.style.display="none",e.style.display="")}))}e=document.getElementById("keyForm"),n=document.getElementById("totpKey"),o=document.getElementById("saveButton"),i=document.getElementById("totpArea"),u=document.getElementById("totpNumber"),a=document.getElementById("reset"),s=document.getElementById("timespan"),l=document.getElementById("error"),o.onclick=function(){if(/^[ABCDEFGHIJKLMNOPQRSTUVWXYZ234567]+$/i.test(n.value)&&(new jsOTP.totp).base32tohex(n.value).length%2==0){l.innerHTML="&nbsp;";var t=h||{};t[c]=n.value,chrome.storage.local.set({totpKeyStore:t},(function(){E()}))}else l.innerHTML="Invalid base32 key"},a.onclick=function(){var t=h||{};delete t[c],chrome.storage.local.set({totpKeyStore:t},(function(){E()}))},chrome.tabs.getSelected(null,(function(e){t=e,c=function(){var e=t.url.toLowerCase();e=f(e,"?"),e=f(e,"#");var n=new(r())("SHA-1","TEXT");return n.update(e),"url_"+n.getHash("HEX")}(),E()}))}()})();